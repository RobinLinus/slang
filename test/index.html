<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
    Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>mathslang</title>
    <meta name="description" content="">
    <meta name="author" content="Linus">

    <meta name="viewport" content="width=device-width; initial-scale=1.0">

    <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <script type="text/javascript" src="../jquery/jquery-1.10.2.min.js"></script>

    <!--Development -->
    <script type="text/javascript" src="src/lex.js"></script>
	<script type="text/javascript" src="src/imag.js"></script>
    <script type="text/javascript" src="src/syntax.js"></script>
    <script type="text/javascript" src="src/seman.js"></script>
    <script type="text/javascript" src="src/mathslang.js"></script>
    <!-- -->

    <!--Sum ->
    <script type="text/javascript" src="mathslang.js"></script>
    <!---->

    <!--Production ->
    <script type="text/javascript" src="mathslang.min.js"></script>
    <!-- -->

    <style>
        body {
            background: black;
            color: green;
            font-family: "Courier New", Courier, monospace;
        }

        #tests p, #syntaTests p {
            margin: 5px;
            text-align: center;
            font-size: 23px;
            padding: 7px;
            width: 400px;
        }

        #tests, #syntaTests, #approx {
            margin-bottom: 40px;
            border-bottom: 1px solid green;
        }

        #tests > div, #syntaTests > div,  #approx > div {
            width: 410px;
            display: inline-table;
            background: black;
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 18px;
        }

        h1, h3 {
            margin-left: 17px;
        }

        h1 {
            border-bottom: 2px solid green;
        }
    </style>
</head>

<body>
<header>
    <h1>mathslang testsuite</h1>
</header>

<div id="tests">
<h3>match : String^2 -> bool</h3>

<div>
    exponential
    <p>2^(x+1)==2*2^x</p>

    <p>a^2==a^(1+1)</p>

    <p>a^2==a^(1+1)</p>

    <p>a==(a^(1/2))^2</p>

    <p>a==(a^2)^(1/2)</p>

    <p>
        4^(1/2)==2
    </p>

    <p>
        x^(-1)==1/x
    </p>

    <p> x^(-2)==1/(x^2)</p>

    <p> x^(-a)==1/(x^a)</p>

    <p>
        e^(x+y)==(e^x)*(e^y)
    </p>

    <p>
        e^(x+y)!=e^x
    </p>
</div>

<div>
    extreme Bugs
    <p>
        a+b==a+b-a+a
    </p>

    <p>
        a+b!=b-a
    </p>

    <p>
        (2-3)/(1-4)==1/3
    </p>
     <p>
        1.2!=:§
    </p>
</div>

<div>
    empty / NaN
    <p>
        !=0
    </p>

    <p>
        x+1!=
    </p>

    <p>
        !=x+1
    </p>

    <p>
        1/0!=.5.5
    </p>
</div>

<div>
    constants
    <p>
        2+3==5
    </p>

    <p>
        3-2==1
    </p>

    <p>
        3*2==6
    </p>

    <p>
        2/4==1/2
    </p>

    <p>
        4/8==0,5
    </p>

    <p>
        2/5==0.4
    </p>

    <p>
        2^3==8
    </p>

    <p>
        2^3==8
    </p>

    <p>
        5+3!=a^2+b^2
    </p>

    <p>
        bug!=5
    </p>

    <p>
        5!=bug
    </p>

    <p>
        5!=a^2+b^2
    </p>
</div>

<div>
    addition
    <p>
        a+b==b+a
    </p>

    <p>
        a+b!=a+b+b
    </p>
</div>

<div>
    multiplication
    <p>
        ab==b*a
    </p>

    <p>
        ab!=a*b*b
    </p>
</div>

<div>
    division
    <p>
        a/b==a*1/b
    </p>

    <p>
        a/a==1
    </p>
</div>

<div>
    unknownVariable
    <p>
        a+b!=a+c
    </p>
</div>

<div>
    multShort
    <p>
        ab==ba
    </p>

    <p>
        2ab==2ba
    </p>
</div>

<div>
    distributiveLaw
    <p>
        a(b+c)==ab+ac
    </p>

    <p>
        a(b+c)==ab+ac
    </p>

    <p>
        a(b+c)==ab+ac
    </p>
</div>

<div>
    power
    <p>
        a*a==a^2
    </p>

    <p>
        y*y*y==y^3
    </p>

    <p>
        z^4!=z*z*z
    </p>

    <p>
        a^2+b==b+a*a
    </p>
</div>

<div>
    powerAndMultiplication
    <p>
        3ab^2==3*a*b*b
    </p>

    <p>
        3a^2 b==3*a*a*b
    </p>
</div>

<div>
    binominals
    <p>
        (a+b)(a+b)==a*a+2ab+b*b
    </p>

    <p>
        (a-b)(a-b)==a*a-2ab+b*b
    </p>

    <p>
        (a+b)(a-b)==a*a-b*b
    </p>
</div>

<div>
    binominalsWithPower
    <p>
        (a+b)^2==a^2+2ab+b^2
    </p>

    <p>
        (a-b)^2==a^2-2ab+b^2
    </p>

    <p>
        (a+b)(a-b)==a^2-b^2
    </p>

    <p>
        a*b*b==a*b^2
    </p>
</div>

<div>
    units
    <p>
        1Kg==1000 g
    </p>

    <p>
        1 Kg==1000g
    </p>

    <p>
        1000 m==1Km
    </p>

    <p>
        1000m==1 Km
    </p>
</div>

<div>
    indexed variables
    <p>
        x0+y0==y0+x0
    </p>

    <p>
        x0y0==y0*y0
    </p>

    <p>
        x0-y0==-y0+x0
    </p>

    <p>
        x0+y0!=0
    </p>

    <p>
        x0!=0x
    </p>
</div>

<div>
    trigonometry
    <p>
        sin(a+b)==sin(a+b)
    </p>

    <p>
        cos(a+b)==cos(b+a)
    </p>

    <p>
        tan(a+b)==tan(b+a)
    </p>

    <p>
        sin(0)==0
    </p>

    <p>
        cos(0)==1
    </p>

    <p>
        tan(0)==0
    </p>

    <p>
        sin(90)==1
    </p>

    <p>
        cos(90)==0
    </p>

    <p>
        sin(180)==0
    </p>

    <p>
        cos(180)==-1
    </p>

    <p>
        tan(180)==0
    </p>

    <p>
        tan(a)==sin(a)/cos(a)
    </p>

</div>


<div>
    knownBugs
    <p>
        5x+4(7-2x)/3==5x+(7-2x)*4/3
    </p>

    <p>
        5x+4(7-2x)/3==5x+4((7-2x)/3)
    </p>

    <p>
        x+2(1-x)==-x+2
    </p>

    <p>
        3*(-1)==3*-1
    </p>
</div>
<div>
    specials chars
    <p>
        a^3==aa²
    </p>

    <p>
        b&sup3;==bbb
    </p>

    <p>
        a²!=a+a
    </p>
</div>

<div>
    squareRoots
    <p>
        sqrt(x)==x^(1/2)
    </p>

    <p>
        sqrt(4)==2
    </p>

    <p>
        Sqrt(4)==2
    </p>

    <p>
        wurzel(9)==3
    </p>

    <p>
        Wurzel(16)==4
    </p>
</div>

<div>
    linearFunctions
    <p>
        2x+1==1+x+x
    </p>

    <p>
        mx+1==1+mx
    </p>

    <p>
        -mx+n==n-mx
    </p>
</div>
<div>
    quadraticFunctions
    <p>
        2x*x+1==1+x*2*x
    </p>

    <p>
        2x*x+1+2x==2x*(x+1)+1
    </p>
</div>

</div>

<div id="syntaTests">
    <h3>matchSyntax : String^2 -> bool</h3>

    <div>
        <p>
            a+b==b+a
        </p>

        <p>
            3.0==3
        </p>

        <p>
            ca+ba==ab+ac
        </p>

        <p>
            a(b+c)!=ab+ac
        </p>

        <p>
            3+4!=7
        </p>

        <p>
            (a+b)^2!=a^2+2ab+b^2
        </p>

        <p>
            (a-b)^2!=a^2-2ab+b^2
        </p>

        <p>
            (a+b)(a-b)!=a^2-b^2
        </p>

        <p>
            a*b*b!=a*b^2
        </p>
    </div>
</div>

<div id="approx">
    <h3>matchApprox : String^2xNum -> bool</h3>

    <div>
        <p>
            1==1.1
        </p>

        <p>
            3.0==3
        </p>

    </div>
</div>
<script>
    function test(id, matchFunction) {
        $(id).each(function (i, e) {
            try {
                var html = e.innerHTML;
                var input = html.split('==');
                var color = '';
                if (input.length == 1) {
                    input = html.split('!=');
                    fill(e, !matchFunction(input[0], input[1]),0.5);
                } else {
                    fill(e, matchFunction(input[0], input[1]),0.5);
                }
            } catch (a) {
                console.log(e);
                fill(e, false);
            }
        });
    }

    function fill(e, isCorrect) {
        e.style.border = '2px solid ' + ( isCorrect ? 'green' : 'red');
        e.style.background = ( isCorrect ? 'rgba(0,255,0,0.25)' : 'rgba(255,0,0,0.4)');
    }

    function initTest(id, matchFunction) {
        test(id, matchFunction);
        $(id).attr('contentEditable', true).keypress(function (e) {
            test(e.target, matchFunction);

            if (e.which == 13) {
                e.preventDefault();
            }
            console.log(e);
        });
    }

    initTest('#tests p', match);
    initTest('#syntaTests p', matchSyntax);
    initTest('#approx p', matchApprox);

</script>
</body>
</html>
