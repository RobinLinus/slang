"use strict";var Slang=Slang||{};Slang.hausdorffslang=function(){function n(n,t,e,i,u){var a=o(n,t,e,i,u);return 1-Math.max(r(a.X,a.Y),r(a.Y,a.X))}function t(n,t){var e=n.x-t.x,r=n.y-t.y;return Math.sqrt(e*e+r*r)}function e(n,e){return e.reduce(function(e,r){var i=t(n,r);return e>i?i:e},1/0)}function r(n,t){return n.reduce(function(n,r){var i=e(r,t);return i>n?i:n},0)}function i(n){var t=n.reduce(function(n,t){return{x0:n.x0+t.x,y0:n.y0+t.y}},{x0:0,y0:0});return t.x0/=n.length,t.y0/=n.length,t}function u(n,t,e,r){var i=e?t.x0:0,u=r?t.y0:0;return n.map(function(n){return{x:n.x-i,y:n.y-u}})}function a(n){return n.reduce(function(n,t){return{xmax:Math.max(t.x,n.xmax),xmin:Math.min(t.x,n.xmin),ymax:Math.max(t.y,n.ymax),ymin:Math.min(t.y,n.ymin)}},{xmax:-(1/0),ymax:-(1/0),xmin:1/0,ymin:1/0})}function s(n,t,e,r){var i=Math.abs(t.xmax-t.xmin),u=Math.abs(e.xmax-e.xmin),a=Math.abs(t.ymax-t.ymin),s=Math.abs(e.ymax-e.ymin),o=u/i,f=s/a,c=2*o*f/(o+f);return n.map(function(n){return{x:r.x0+(r.x0-n.x)/c,y:r.y0+(r.y0-n.y)/c}})}function o(n,t,e,r,o){if(e||r||o){var f=i(n),c=i(t);if(o){var l=a(n),g=a(t);t=s(t,l,g,c)}(e||r)&&(n=u(n,f,e,r),t=u(t,c,e,r))}return{X:n,Y:t}}return{compare:n}}();var Slang=Slang||{};Slang.colorslang=function(){function n(n,e){return n.toLowerCase()===t(e).toLowerCase()}function t(n){return"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1)}return{compare:n}}();var Slang=Slang||{};Slang.langslang=function(){function n(n,t){return Slang.logicslang.compare(n,t,e)}function t(n,t){var e=[];if(n==t)return 0;if(0==n.length)return t.length;if(0==t.length)return n.length;for(var r=0;r<n.length+1;r++){e[r]=[];for(var i=0;i<t.length+1;i++)0==r||0==i?e[r][i]=Math.max(r,i):(e[r][i]=Math.min(e[r-1][i]+1,e[r][i-1]+1,e[r-1][i-1]+(n[r-1]==t[i-1]?0:1)),i>1&&r>1&&n[r-1]==t[i-2]&&n[r-2]==t[i-1]&&(e[r][i]=Math.min(e[r][i],e[r-2][i-2]+1)))}return e[n.length][t.length]}function e(n,t){if(n=n.trim(),t=t.trim(),0!==n.indexOf("#"))return n===t;var e=n.substr(1,n.indexOf(" ")-1);return n=n.substr(n.indexOf(" ")+1),"typo"===e?r(i(n),i(t)):"nocase"===e?i(n)===i(t):"regex"===e?(n=new RegExp(n),n.test(t)):void 0}function r(n,e){var r=t(n,e);return r<Math.ceil(Math.sqrt(n.length)-1)}function i(n){return n.toLowerCase()}return{compare:n}}(),Slang.langslang._damerauLevenshtein=function(n,t){var e=[];if(n==t)return 0;if(0==n.length)return t.length;if(0==t.length)return n.length;for(var r=0;r<n.length+1;r++){e[r]=[];for(var i=0;i<t.length+1;i++)0==r||0==i?e[r][i]=Math.max(r,i):(e[r][i]=Math.min(e[r-1][i]+1,e[r][i-1]+1,e[r-1][i-1]+(n[r-1]==t[i-1]?0:1)),i>1&&r>1&&n[r-1]==t[i-2]&&n[r-2]==t[i-1]&&(e[r][i]=Math.min(e[r][i],e[r-2][i-2]+1)))}return e[n.length][t.length]},window.Slang=window.Slang||{},window.Slang.logicslang={compare:function(n,t,e,r){if("object"==typeof t){for(var i in t){var u=new RegExp("@"+i,"g");n.exp?n.inputExp=n.inputExp.replace(u,t[i]):n=n.replace(u,t[i])}return e(n,n.inputExp,r)}return e(n,t,r)}};var LogicParser=function(n){function t(n){var t=[];return t=n.split(/(#and|#or|#not|<&|&|<|>)/),t=t.map(function(n){return n.trim()}),t=t.filter(function(n){return n.length>0})}function e(){if("#not"==i[0])return i.shift(),!r();var n=r();if("#and"===i[0]||"#or"===i[0]){var t=i.shift(),e=r();return"#and"===t?n&&e:n||e}return n}function r(){var t=i.shift(),r="";if("<"==t){r=e();var o=i.shift();if(">"!=o)throw s;return r}if("<&"==t){var f=u;u=i.shift();var c=i.shift();if("&"!=c)throw s;r=e();var o=i.shift();if(">"!=o)throw s;return u=f,r}if(">"==t)throw s;return n(t,u,a)}var i=[],u="",a=void 0,s="ERROR: Mismatched parentheses";this.compare=function(n,r,s){return i=t(n),u=r,a=s,e()}};window.Slang=window.Slang||{},window.Slang.mathslang=function(){function n(n,t,e){return Slang.logicslang.compare(n,t,this._compare,e)}function t(n,t,e){t+="";var r=n.exp+"";t=t.trim();var i=n.units?n.units.join(" "):void 0;if(n.fun)switch(n.fun){case"#equals":return f(r,t,i);case"#identic":return c(r,t);case"#approx":return l(r,t,n.error,i);case"#lt":return parseFloat(t)<parseFloat(r);case"#leq":return parseFloat(t)<=parseFloat(r);case"#gt":return parseFloat(t)>parseFloat(r);case"#geq":return parseFloat(t)>=parseFloat(r);case"#vecEquals":return Slang._mathslang.vec.compare(r,t);default:return r===t}}function e(n){var t="";[/Km/,/km/,/dm/,/cm/,/mm/].some(function(t){return t.test(n)})&&(t+="distance "),[/Kg/,/kg/,/g/,/mg/].some(function(t){return t.test(n)})&&(t+="weight "),[/h/,/min/,/s/,/ms/].some(function(t){return t.test(n)})&&(t+="time ");var e=n.split("m");return-1==t.indexOf("distance")&&e.length>1&&e.some(function(n){var t="gs".split("").every(function(t){return!n.length||t!=n[0]}),e="Kkdc".split("").every(function(t){return!n.length||t!=n[n.length-1]});return t&&e})&&(t="distance "+t),t.trim()}function r(n,t){function e(n,t,e){return n.substr(0,t)+e+n.substr(t+e.length)}t&&(n=a().replace_units(n,t)),n=o().present(n),n=n.simplify(3),n.free_const(),n=n.unit();for(var r=0;r<n.length;++r)if(r>0&&"^"==n[r-1]&&"-"==n[r]){for(var i=0;" "==n[r-2-i];)++i;if(")"==n[r-2-i]){for(var u=1,s=1;s>0&&r-2-i-u>=0;){var f=n[r-2-i-u];s+="("==f?-1:")"==f?1:0,++u}for(;u>=0;)--u}else n=e(n,r-0,"^"),n=e(n,r-1,n[r-2]),n=e(n,r-2,"/")}return n=n.replace(/1/g,"")}function i(n){}function u(){return Slang._mathslang.macro}function a(){return Slang._mathslang.lexical}function s(){return Slang._mathslang.syntax}function o(){return Slang._mathslang.semantix}function f(n,t,e){try{if(e&&(n=a().replace_units(n,e),t=a().replace_units(t,e)),a().empty(n)||a().empty(t))return!1;var r=u().replace_id(n,t);return n=r[0],t=r[1],n=s().present(n),t=s().present(t),s().string(n)==s().string(t)?(i("syntax equality: "+s().string(n)+" = "+s().string(t)),!0):(n=o().represent(n),t=o().represent(t),n.string()==t.string()?(i("semantix equality: "+n.string()+" = "+t.string()),!0):n.calc()==t.calc()?(i("constant equality: "+n.string()+" = "+t.string()),!0):(n=n.simplify(3),t=t.simplify(3),n.string()==t.string()?(i("simplify equality: "+n.string()+" = "+t.string()),!0):(i("no semantix equality: "+n.string()+" = "+t.string()),!1)))}catch(f){return!1}}function c(n,t,e){try{if(e&&(n=a().replace_units(n,e),t=a().replace_units(t,e)),a().empty(n)||a().empty(t))return!1;var r=u().replace_id(n,t);return n=r[0],t=r[1],n=s().present(n),t=s().present(t),s().string(n)==s().string(t)?(i("syntax equality: "+s().string(n)+" = "+s().string(t)),!0):(i("no syntax equality: "+s().string(n)+" = "+s().string(t)),!1)}catch(o){return!1}}function l(n,t,e,r){try{if("number"==typeof n&&(n=""+n),"number"==typeof t&&(t=""+t),"string"==typeof e&&(e=parseFloat(e)),r&&(n=a().replace_units(n,r),t=a().replace_units(t,r)),a().empty(n)||a().empty(t))return!1;var s=u().replace_id(n,t);n=s[0],t=s[1],n=o().present(n),t=o().present(t);var f=n.clone(),c=t.clone();return f.free_const(),c.free_const(),f=f.simplify(3),c=c.simplify(3),f.string()!=c.string()?!1:(n.free_imag(),t.free_imag(),n=n.simplify(2),t=t.simplify(2),n=n.calc(),t=t.calc(),isNaN(n)||isNaN(t)?!1:Math.abs(n-t)<=e+2.31e-16?(i("approx equality: "+n+" = "+t+" (epsilon = "+e+")"),!0):!1)}catch(e){return!1}}return{compare:n,_compare:t,extractUnit:e,stringUnit:r}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.imaginary=function(){function n(n){var t={};return Object.keys(n).sort(function(n,t){return n.charCodeAt(0)-t.charCodeAt(0)}).forEach(function(e){t[e]=n[e]}),t}function t(n,t){Object.keys(t).forEach(function(e){n[e]?n[e]+=t[e]:n[e]=t[e],n[e]||delete n[e]})}function e(n,t){Object.keys(n).forEach(function(e){t?n[e]*=t:delete n[e]})}function r(n){return 0==Object.keys(n).length}function i(n){return Object.keys(n).reduce(function(t,e){return t[e]=n[e],t},{})}function u(n){return Object.keys(n).reduce(function(t,e){var r=n[e];return t+(1==r?e:e+"^"+r)},"")}return{sort:n,insert:t,pow:e,empty:r,clone:i,string:u}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.lexical=function(){function n(n,t){this.flag=n,this.code=t,this.inv=!1}function t(t){t=s(t);for(var e=[],r=u(t).split("");r.length>0;){var i=0,g="";if(f.test(r[0])){do r.shift();while(f.test(r[0]))}else if(c[0].test(r[0])){r.shift(),g="",i=o.L;for(var h=1,p="";h>0;){if(g+=p,0==r.length)throw")";p=r.shift(),h+=c[0].test(p)?1:c[1].test(p)?-1:0}e.push(new n(i,g))}else if(e.length&&"_"==r[0])r.shift();else{for(;i<l.length;){var m=l[i];if(m.test(r[0]))do g=g.concat(r.shift());while(m.plu&&m.test(r[0]));g.length>0?(e.push(new n(i,g)),i=l.length):i++}if(0==g.length)throw r.shift()}}return a(e)}function e(n){for(var t=0;t<n.length;t++)if(!f.test(n[t]))return!1;return!0}function r(n,t){function e(n,t,e){return n.substr(0,t)+e+n.substr(t+e.length)}var r=!0,i=!0;t.split(" ").forEach(function(t){switch(t){case"weight":n=n.replace(/ton/g,"(°1000000g)"),i&&(n=n.replace(/t/g,"(°1000000g)")),n=n.replace(/Kg/g,"(°1000g)"),n=n.replace(/kg/g,"(°1000g)"),n=n.replace(/mg/g,"(°0.001g)");break;case"distance":n=n.replace(/Km/g,"(° 1000m)"),n=n.replace(/km/g,"(° 1000m)"),n=n.replace(/dm/g,"(° 0.100m)"),n=n.replace(/cm/g,"(° 0.010m)"),n=n.replace(/mm/g,"(° 0.001m)"),n=n.replace(/min/g,"(° 60s)"),n=n.replace(/m/g,"(° m)"),r=!1;break;case"time":n=n.replace(/min/g,"(° 60s)"),r&&(n=n.replace(/m/g,"(° 60s)")),n=n.replace(/h/g,"(° 3600s)"),n=n.replace(/s/g,"(° s)"),i=!1;break;default:throw"mathslang does not support unit `"+t+"'"}});for(var u=0;u<n.length;++u)if("°"==n[u]){if(u&&"("!=n[u-1])throw n[u-1]+"° instead of (°";var a=2;do{for(;" "==n[u-a];)++a;if(u>=a&&")"==n[u-a]){for(var s=1;s>0&&u>a;){var o=n[u-++a];s+=")"==o?1:"("==o?-1:0}++a}for(;" "==n[u-a];)++a;for(;u>=a&&/^[0-9a-zA-Z]$/.test(n[u-a]);)++a;for(;" "==n[u-a];)++a}while(u>=a&&")"==n[u-a]);if("/"==n[u-a]){for(var f=0;a>f+2;++f)n=e(n,u-f,n[u-f-2]);n=e(n,u-a+1," "),n=e(n,u-a+2,"(")}}return n.replace(/\°/g,"")}function i(n,t){this.exp=t,this.plu=n,this.test=function(n){return this.exp.test(n)}}function u(n){return n=n.replace(/²/g,"^2"),n=n.replace(/³/g,"^3"),n=n.replace(/\u00B2/g,"^2"),n=n.replace(/\u00B3/g,"^3"),n=n.replace(/,/g,".")}function a(n){var t=[],e=!1;for(var r in n){if(n[r].flag==o.O)switch(n[r].code){case"-":n[r].inv=!n[r].inv;case"+":break;case"/":e=!0;case"*":continue;default:throw"operator `"+n[r].code+"' has not been implemented."}else if(n[r].flag==o.E){if(0==t.length)throw"radix ahead `"+n[r].code+"' is undefined.";var i=t.pop();if(i.flag==o.O)throw"radix is not allowed to be an `"+i.code+"' operator.";n[r].code=i.code,n[r].inv=i.inv}else e&&(n[r].inv=!(e=!1));t.push(n[r])}return t}function s(n){for(var t={"Sqrt(°)":"°^.5","sqrt(°)":"°^.5","root(°)":"°^.5","wurzel(°)":"°^.5","Wurzel(°)":"°^.5","R007(°)":"°^.5"},e=Object.keys(t),r=0;r<n.length;++r)for(var i=0;i<e.length;++i)for(var u=0;e[i][u]==n[r+u];)if(++u,"°"==e[i][u]){for(var a="",s=0,o="";(o=n[r+u+s])!=e[i][u+1];)a+=o,++s;n=n.substr(0,r)+"("+t[e[i]]+n.substr(r+u+s,n.length),n=n.replace("°","("+a+")")}return n}var o={O:0,E:1,X:2,N:3,L:7},f=new i(!0,/^\s$/),c=[new i(!1,/^\(|\[|\{$/),new i(!1,/^\)|\]|\}$/)],l=[new i(!1,/^\+|\-|\*|\/$/),new i(!1,/^\^$/),new i(!1,/^[a-zA-Zα-ωΓ-Ω]$/),new i(!0,/^[0-9]|\,|\.$/)];return{FLAG:o,T:n,iter:t,empty:e,replace_units:r}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.macro=function(){function n(n){for(var t=a[0],e=a.substring(1);-1!=n.indexOf(t);){var r=t.charCodeAt(0);if(e.length&&e.charCodeAt(0)==r){if(e=e.substring(1),!e.length)return"";t=e[0],e=e.substring(1)}else t=String.fromCharCode(r+1)}return t}function t(n){for(var t=[],e=0;-1!=(e=n.indexOf("_"));)t.push(n.substring(e-1,e+2)),n=n.substring(e+2);return t}function e(n){for(var t=[],e=0;-1!=(e=n.indexOf("'"));)t.push(n.substring(e-1,e+1)),n=n.substring(e+1);return t}function r(n,t,e){for(;-1!=n.indexOf(t);)n=n.replace(t,e);return n}function i(i,a){for(var s=t(i).concat(t(a));s.length;){var o=s.shift(),f=n(i+a);i=r(i,o,f),a=r(a,o,f),o=o[0]+o[2],i=r(i,o,f),a=r(a,o,f)}for(s=e(i).concat(e(a));s.length;){var o=s.shift(),f=n(i+a);i=r(i,o,f),a=r(a,o,f)}return i=u(i),a=u(a),[i,a]}function u(n){for(var t=0,e=n,r=e.indexOf("/")+1;r&&t<n.length;r=e.indexOf("/")+1){var e=n.substr(r);t+=r;for(var i=0,u=e[i];/^\s$/.test(u)||/^[0-9]|\,|\.$/.test(u)||/^[a-zA-Zα-ωΓ-Ω]$/.test(u);)u=e[++i];if("^"==u){for(u=e[++i];/^\s$/.test(u)||/^[0-9]|\,|\.$/.test(u)||/^[a-zA-Zα-ωΓ-Ω]$/.test(u);)u=e[++i];n=n.substr(0,t)+"("+n.substr(t,t+i)+")"+n.substr(t+i),i+=2,t+=i,e=e.substr(2+i)}else e=e.substr(i),t+=i}return n}var a="azAZαωΓΩ";return{replace_id:i}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.semantix=function(){function n(n,t,e){this.fact=void 0!==n?n:1,this.imag=void 0!==t?t:{},this.sums=void 0!==e?e:[]}function t(n,t,e){this.offset=void 0!==n?n:0,this.queues=void 0!==t&&t.length?t:[],this.expont=void 0!==e?e:null}function e(n){if("string"!=typeof n)throw"`Seman.present(string)' got `"+typeof n+"' instead of `string'";var t=u().present(n);return r(t)}function r(e){var i=new t;return e.forEach(function(e){var u=new n;u.fact=e.fact?e.fact.reduce(function(n,t){return n*t},1):1,u.imag=function(n){for(var t={},e=0;e<n.length;e++){var r=n[e];t[r]?t[r]++:t[r]=1}return t}(e.imag),e.exps.forEach(function(e){var i=r(e.radix),a=r(e.power),s=i.expont;if(i.expont=a,s){var o=new t;i.expont=s,o.expont=a,o.queues.push(new n(1,{},[i])),i=o}u.sums.push(i)}),e.sums.forEach(function(n){var t=r(n);u.sums.push(t)}),a(u)?i.offset+=u.fact:i.queues.push(u)}),i=i.solidify()}function i(){return Slang._mathslang.imaginary}function u(){return Slang._mathslang.syntax}function a(n){return 0==Object.keys(n.imag).length&&0==n.sums.length}function s(n){return Object.keys(n.imag).length>0?NaN:n.fact*n.sums.reduce(function(n,t){return n*t.calc()},1)}function o(t){var e=new n;return e.fact=t.fact,e.imag=i().clone(t.imag),e.sums=t.sums.map(function(n){return n.clone()}),e}function f(e,r){if(null!=e.expont)throw"`expansion': `s0.expont != null'";if(null!=r.expont)throw"`expansion': `s1.expont != null'";var u=e.offset*r.offset,a=e.queues.map(function(t){return new n(r.offset*t.fact,i().clone(t.imag),t.sums)}).concat(r.queues.map(function(t){return new n(e.offset*t.fact,i().clone(t.imag),t.sums)}));return e.queues.forEach(function(t){r.queues.forEach(function(e){var r={};i().insert(r,t.imag),i().insert(r,e.imag),a.push(new n(t.fact*e.fact,i().sort(r),t.sums.concat(e.sums)))})}),e=new t(u,a.filter(function(n){return 0!=n.fact}))}function c(n){var t,e,r,i=[];t=n.sums.reduce(function(n,t,e){t=t.combine(t);var r=t.expont;t.expont=null;var i=t.string();return t.expont=r,n[i]?n[i].push(e):n[i]=[e],n},new Object),e=Object.keys(t);for(var u=0;u<e.length;u++)r=t[e[u]],r.length>1&&(i=i.concat(l(n.sums,r)));return i.sort(function(n,t){return t-n}).forEach(function(t){n.sums.splice(t,1)}),n}function l(e,r){if(r.length<2)throw"`combineE': "+r.length+"/2 indices";var i=[],u=new t,a=new t;for(a.offset=e[r[0]].offset,a.queues=e[r[0]].queues;r.length;){var s=e[r[0]].expont;s?s.expont?u.queues.push(new n(1,{},[s])):(u.offset+=s.offset,u.queues=u.queues.concat(s.queues)):u.offset++,i.push(r[0]),r.splice(0,1)}return a.expont=u,e.push(a),i}return n.prototype.ident=function(){return this.fact*this.sums.reduce(function(n,t){return n*t.calc()},1)==1&&i().empty(this.imag)},n.prototype.string=function(){return this.sums.reduce(function(n,t){return n+"("+t.string()+")"},""+this.fact+i().string(this.imag))},n.prototype.pow=function(t){return new n(Math.pow(this.fact,t),Object.keys(this.imag).reduce(function(n,e){return n[e]=this.imag[e]*t,n},{}))},n.prototype.extract=function(){for(var e=this,r=new t(0,[new n(e.fact,i().clone(e.imag))]),u=0;u<e.sums.length;)e.sums[u].expand(),null==e.sums[u].expont?(r=f(r,e.sums[u]),e.sums.splice(u,1)):u++;return r},t.prototype.unit=function(){for(var n=this,t="",e=0;e<n.queues.length;++e){var r=n.queues[e];t=Object.keys(r.imag).reduce(function(n,t){var e=r.imag[t];return n+(1==e?t:-1==e?"1/"+t:t+"^"+e)},t),r.sums.forEach(function(n){t+="("+n.unit()+")"}),e+1<n.queues.length&&(t+=" + ")}return n.expont?t+"^"+n.expont.unit():t},t.prototype.calc=function(){var n=this.offset+this.queues.reduce(function(n,t){return n+s(t)},0);return this.expont?Math.pow(n,this.expont.calc()):n},t.prototype.expand=function(){for(var n=0;n<this.queues.length;){var t=this.queues[n].extract(),e=this.queues[n].imag;if(Object.keys(e).forEach(function(n){delete e[n]}),this.queues[n].fact=1,this.queues[n].ident()){if(t.expont)throw"`expand': `s0.expont' must be `null'.";this.queues.splice(n,1),this.offset+=t.offset,this.queues=t.queues.concat(this.queues),n+=t.queues.length}else 1!=t.calc()&&this.queues[n].sums.push(t),++n}return this},t.prototype.combine=function(){var n=this.offset,e=[],r=void 0,i=this.expont;return i&&(i=this.expont.combine()),this.queues.filter(function(t){var e=s(t);return isNaN(e)?!0:(n+=e,!1)}).map(c).sort(function(n,t){return-function(n,t){for(var e=Object.keys(n),r=Object.keys(t),i=Math.min(e.length,r.length),u=0;i>u;u++){if(e[u]<r[u])return-1;if(e[u]>r[u])return 1}var a=e.length-r.length;if(a)return a;for(var u=0;i>u;u++)if(a=n[e[u]]-t[r[u]])return a;return 0}(n.imag,t.imag)}).forEach(function(n){void 0!=r&&JSON.stringify(r.imag)==JSON.stringify(n.imag)&&0==r.sums.length&&0==n.sums.length?e[0].fact+=n.fact:(e.unshift(n),r=n)}),e=e.filter(function(n){return 0!=n.fact}),new t(n,e,i).solidify()},t.prototype.string=function(){var n=this.expont?!0:!1;return this.queues.reduce(function(n,t){var e=t.string();return n+(t.fact<0?e:"+"+e)},(n?"(":"")+this.offset)+(n?")^("+this.expont.string()+")":"")},t.prototype.simplify=function(n){var t=this;do t=t.expand(),t=t.combine(),t=t.expow();while(--n>0);return t},t.prototype.expow=function(){function e(n){if(0==n.offset&&1==n.queues.length&&n.expont){for(var e=n.expont,r=n.queues[0],n=new t(0,[r]),u=0;u<r.sums.length;u++)r.sums[u].expont=f(r.sums[u].expont,e.clone());var a=e.calc();isNaN(a)?(r.sums.push(new t(r.fact,r.imag,e.clone())),r.fact=1,r.imag={}):(r.fact=Math.pow(r.fact,a),i().pow(r.imag,a))}return n}var r=e(this),u=r.expont?r.expont.calc():NaN;if(isNaN(u))r.expont&&r.expont.expont;else{for(var a=[];u>1;){var s=new t;s.offset=r.offset,s.queues=r.queues.map(o),a.push(s),u--}r.expont=1==u?null:new t(u),a.length&&(a.unshift(r),r=new t,r.queues.push(new n(1,{},a)))}return r.queues.forEach(function(n){n.sums=n.sums.map(function(n){return n.expow()})}),r=r.solidify()},t.prototype.solidify=function(){var n=this,t=n.expont?n.expont.calc():NaN;return 0!=n.offset||1!=n.queues.length||1!=n.queues[0].fact||0!=n.queues[0].sums||isNaN(t)?n.queues.forEach(function(n){return n.sums.map(function(n){return n.solidify()})}):(i().pow(n.queues[0].imag,t),n.expont=null),0!=n.offset||1!=n.queues.length||n.expont||1!=n.queues[0].fact||0!=Object.keys(n.queues[0].imag).length||1!=n.queues[0].sums.length?n:n.queues[0].sums[0].solidify()},t.prototype.clone=function(){var n=this,e=new t;return e.offset=n.offset,e.queues=n.queues.map(o),e.expont=n.expont?n.expont.clone():null,e},t.prototype.free_const=function(){var n=this;n.offset=0,n.queues.forEach(function(n){n.fact=1,n.sums.forEach(function(n){n.free_const()})}),n.expont&&n.expont.free_const()},t.prototype.free_imag=function(){this.queues.forEach(function(n){n.imag="",n.sums.forEach(function(n){n.free_imag()})}),this.expont&&this.expont.free_imag()},{present:e,represent:r}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.syntax=function(){function n(){this.fact=[],this.imag="",this.exps=[],this.sums=[]}function t(){this.radix=[],this.power=[]}function e(n){if("string"!=typeof n)throw"syntax.present(typeof s = "+typeof n+")";var t=i().iter(n),e=[];do{for(var r=!1;t.length>0&&t[0].flag==i().FLAG.O;)t.shift().inv&&(r=!r);var u=a(t);u&&(r&&u.fact.unshift(-1),e.push(u))}while(t.length>0);return l(e),e}function r(n){var t="";if(n.length){t+=n[0].string();for(var e=1;e<n.length;e++){var r=n[e].fact.reduce(function(n,t){return n*t},1),i=n[e].string();t+=0>r?i:"+"+i}}return t}function i(){return Slang._mathslang.lexical}function u(n){}function a(r){for(var u=new n;r.length>0;)switch(r[0].flag){case i().FLAG.N:var a=parseFloat(r[0].code);if(r.shift().inv){if(0==a)throw"`pluckQ' divided by 0.";a=1/a}u.fact.push(a);break;case i().FLAG.X:var c=r[0].code;if(r.shift().inv){var l=new t;l.radix.push(f(c)),l.power.push(o(-1)),u.exps.push(l)}else u.imag+=c;break;case i().FLAG.E:var l=new t;r[0].inv,l.radix=e(r.shift().code),l.power=s(r),u.exps.push(l);break;case i().FLAG.L:var g=e(r[0].code);if(r.shift().inv){var l=new t;l.radix=g,l.power.push(o(-1)),u.exps.push(l)}else u.sums.push(g);break;case i().FLAG.O:default:return m(u)?null:u}return m(u)?null:u}function s(n){if(!(n.length>0))throw"`pluckT' without any token.";switch(n[0].flag){case i().FLAG.N:return[o(n.shift().code)];case i().FLAG.X:return[f(n.shift().code)];case i().FLAG.E:var r=new t;if(n[0].inv)throw"`pluckT("+n[0].code+"..)' illegal `inv'";return r.radix=e(n.shift().code),r.power=s(n,!0),[c(r)];case i().FLAG.L:return e(n.shift().code);case i().FLAG.O:n.shift();var u=s(n);return u.forEach(function(n){n.fact.push(-1)}),u;default:throw"`pluckT' invalid `flag=?'."}}function o(t){var e=new n;return e.fact.push(t),e}function f(t){var e=new n;return"string"!=typeof t?(u("not a string"),e):(e.imag=t,e)}function c(t){var e=new n;return"E"!=typeof t?(u("not a E"),e):(e.exps.push(t),e)}function l(n){n.forEach(function(n){n.sums.forEach(function(n){l(n)}),n.fact.sort(function(n,t){return n-t}),n.imag=function(n){return n.split("").sort(function(n,t){return n.charCodeAt(0)-t.charCodeAt(0)}).reduce(function(n,t){return n+t},"")}(n.imag),n.exps.sort(function(n,t){return h(n)-h(t)}),n.sums.sort(function(n,t){return g(n)-g(t)})}),n.sort(function(n,t){return function(n,t){for(var e=Math.min(n.length,t.length),r=0;e>r;r++){if(n[r]<t[r])return-1;if(n[r]>t[r])return 1}return n.length-t.length}(n.imag,t.imag)})}function g(n){return n.reduce(function(n,t){return n+p(t)},0)}function h(n){return Math.pow(16536421.3572347+g(n.radix),g(n.power))}function p(n){return n.fact.reduce(function(n,t){return n*t},1)*function(n){for(var t=1,e=0;e<n.length;e++)t*=n.charCodeAt(0);return t}(n.imag)*n.exps.reduce(function(n,t){return n*h(t)},1)*n.sums.reduce(function(n,t){return n*g(t)},1)}function m(n){return 0==n.fact.length&&0==n.imag.length&&0==n.exps.length&&0==n.sums.length}return n.prototype.string=function(){var n=this,t="";if(n.fact.length){t+=n.fact[0];for(var e=1;e<n.fact.length;e++)t+="*"+n.fact[e]}return t+=n.imag,t+=n.exps.reduce(function(n,t){return n+t.string()},""),t+=n.sums.reduce(function(n,t){return n+"("+r(t)+")"},"")},t.prototype.string=function(){return"("+r(this.radix)+")^("+r(this.power)+")"},{present:e,string:r}}(),window.Slang._mathslang=window.Slang._mathslang||{},Slang._mathslang.vec=function(){function n(n,e){return n=JSON.parse(n),e=JSON.parse(e),JSON.stringify(t(n))===JSON.stringify(t(e))}function t(n){var t=Math.sqrt(n.reduce(function(n,t){return n+t*t},0));return n.map(function(n){return n/t})}return{compare:n}}();