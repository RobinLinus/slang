"use strict";window.Slang=window.Slang||{},window.Slang.logicslang={compare:function(r,n,t,i){i&&(r=this.replaceVariables(r,i));var a=new LogicParser(t);return a.compare(r,n)},replaceVariables:function(r,n){for(var t in n){var i=new RegExp("@"+t,"g");r=r.replace(i,n[t])}return r}};var LogicParser=function(r){function n(r){var n=[];return n=r.split(/(#and|#or|#not|<&|&|<|>)/),n=n.map(function(r){return r.trim()}),n=n.filter(function(r){return r.length>0})}function t(){if("#not"==a[0])return a.shift(),!i();var r=i();if("#and"===a[0]||"#or"===a[0]){var n=a.shift(),t=i();return"#and"===n?r&&t:r||t}return r}function i(){var n=a.shift(),i="";if("<"==n){i=t();var f=a.shift();if(">"!=f)throw o;return i}if("<&"==n){var u=e;e=a.shift();var c=a.shift();if("&"!=c)throw o;i=t();var f=a.shift();if(">"!=f)throw o;return e=u,i}if(">"==n)throw o;return r(n,e)}var a=[],e="",o="ERROR: Mismatched parentheses";this.compare=function(r,i){return a=n(r),e=i,t()}};