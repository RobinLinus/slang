"use strict";window.Slang=window.Slang||{},window.Slang.logicslang={compare:function(t,e,i,n){n&&(t=this.replaceVariables(t,n));var s=new LogicParser(i);return s.eval(t,e)},replaceVariables:function(t,e){for(var i in e){var n=new RegExp("@"+i,"g");t=t.replace(n,e[i])}return t}},window.LogicParser=function(t){this.compareFn=t,this.eval=function(t,e){return this.tokens=this.getTokens(t),this.givenValue=e,this.expression()},this.getTokens=function(t){var e=[];return e=t.split(/(#and|#or|#not|#var|<&|&|<|>)/),e=e.map(function(t){return t.trim()}),e=e.filter(function(t){return t.length>0})},this.expression=function(){if("#not"==this.tokens[0])return this.tokens.shift(),!this.terminal();var t=this.terminal();if("#and"==this.tokens[0]||"#or"==this.tokens[0]){var e=this.tokens.shift(),i=this.terminal();return"#and"==e?t&&i:t||i}return t},this.terminal=function(){var t=this.tokens.shift();if("<"==t){value=this.expression();var e=this.tokens.shift();if(">"!=e)throw"ERROR: Mismatched parentheses";return value}if("<&"==t){var i=this.givenValue;this.givenValue=this.tokens.shift();var n=this.tokens.shift();if("&"!=n)throw"ERROR: Mismatched &";value=this.expression();var e=this.tokens.shift();if(">"!=e)throw"ERROR: Mismatched parentheses";return this.givenValue=i,value}if(">"==t)throw"ERROR: Mismatched parentheses";return this.compareFn(t,this.givenValue)}};