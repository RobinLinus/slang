"use strict";window.Slang=window.Slang||{},window.Slang.mathslang=function(){function t(t,e,n){return Slang.logicslang.compare(t,e,this._compare,n)}function e(t,e,n){e+="",t+="";if(e=e.trim(),t=t.trim(),0===t.indexOf("#")){var r=t.substr(1,t.indexOf(" ")-1);switch(t=t.substr(t.indexOf(" ")+1),r){case"equals":return o(t,e,n);case"identic":return c(t,e);case"approx":var i=t.split("#epsilon");return f(i[0],e,i[1],n);case"lt":return Number.parseFloat(e)<Number.parseFloat(t);case"leq":return Number.parseFloat(e)<=Number.parseFloat(t);case"gt":return Number.parseFloat(e)>Number.parseFloat(t);case"geq":return Number.parseFloat(e)>=Number.parseFloat(t);default:return t===e}}}function n(t){var e="";[/Km/,/km/,/dm/,/cm/,/mm/].some(function(e){return e.test(t)})&&(e+="distance "),[/Kg/,/kg/,/g/,/mg/].some(function(e){return e.test(t)})&&(e+="weight "),[/h/,/min/,/s/,/ms/].some(function(e){return e.test(t)})&&(e+="time ");var n=t.split("m");return-1==e.indexOf("distance")&&n.length>1&&n.some(function(t){var e="gs".split("").every(function(e){return!t.length||e!=t[0]}),n="Kkdc".split("").every(function(e){return!t.length||e!=t[t.length-1]});return e&&n})&&(e="distance "+e),console.log(e.trim()),e.trim()}function r(t,e){function n(t,e,n){return t.substr(0,e)+n+t.substr(e+n.length)}e&&(t=s().replace_units(t,e)),t=a().present(t),t=t.simplify(3),t.free_const(),t=t.unit();for(var r=0;r<t.length;++r)if(r>0&&"^"==t[r-1]&&"-"==t[r]){for(var i=0;" "==t[r-2-i];)++i;if(")"==t[r-2-i]){for(var u=1,o=1;o>0&&r-2-i-u>=0;){var c=t[r-2-i-u];o+="("==c?-1:")"==c?1:0,++u}for(;u>=0;)--u}else t=n(t,r-0,"^"),t=n(t,r-1,t[r-2]),t=n(t,r-2,"/")}return t=t.replace(/1/g,"")}function i(t){}function s(){return Slang._mathslang.lexical}function u(){return Slang._mathslang.syntax}function a(){return Slang._mathslang.semantix}function o(t,e,n){try{return n&&(t=s().replace_units(t,n),e=s().replace_units(e,n)),s().empty(t)||s().empty(e)?!1:(t=u().present(t),e=u().present(e),u().string(t)==u().string(e)?(i("syntax equality: "+u().string(t)+" = "+u().string(e)),!0):(t=a().represent(t),e=a().represent(e),t.string()==e.string()?(i("semantix equality: "+t.string()+" = "+e.string()),!0):t.calc()==e.calc()?(i("constant equality: "+t.string()+" = "+e.string()),!0):(t=t.simplify(3),e=e.simplify(3),t.string()==e.string()?(i("simplify equality: "+t.string()+" = "+e.string()),!0):(i("no semantix equality: "+t.string()+" = "+e.string()),!1))))}catch(r){return!1}}function c(t,e,n){try{return n&&(t=s().replace_units(t,n),e=s().replace_units(e,n)),s().empty(t)||s().empty(e)?!1:(t=u().present(t),e=u().present(e),u().string(t)==u().string(e)?(i("syntax equality: "+u().string(t)+" = "+u().string(e)),!0):(i("no syntax equality: "+u().string(t)+" = "+u().string(e)),!1))}catch(r){return!1}}function f(t,e,n,r){try{if("number"==typeof t&&(t=""+t),"number"==typeof e&&(e=""+e),"string"==typeof n&&(n=parseFloat(n)),r&&(t=s().replace_units(t,r),e=s().replace_units(e,r)),s().empty(t)||s().empty(e))return!1;t=a().present(t),e=a().present(e);var u=t.clone(),o=e.clone();return u.free_const(),o.free_const(),u=u.simplify(3),o=o.simplify(3),u.string()!=o.string()?!1:(t.free_imag(),e.free_imag(),t=t.simplify(2),e=e.simplify(2),t=t.calc(),e=e.calc(),isNaN(t)||isNaN(e)?!1:Math.abs(t-e)<=n+2.31e-16?(i("approx equality: "+t+" = "+e+" (epsilon = "+n+")"),!0):!1)}catch(n){return!1}}return{compare:t,_compare:e,extractUnit:n,stringUnit:r}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.imaginary=function(){function t(t){var e={};return Object.keys(t).sort(function(t,e){return t.charCodeAt(0)-e.charCodeAt(0)}).forEach(function(n){e[n]=t[n]}),e}function e(t,e){Object.keys(e).forEach(function(n){t[n]?t[n]+=e[n]:t[n]=e[n],t[n]||delete t[n]})}function n(t,e){Object.keys(t).forEach(function(n){e?t[n]*=e:delete t[n]})}function r(t){return 0==Object.keys(t).length}function i(t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},{})}function s(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return e+(1==r?n:n+"^"+r)},"")}return{sort:t,insert:e,pow:n,empty:r,clone:i,string:s}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.impl=function(){function t(t){}function e(){return Slang._mathslang.lexical}function n(){return Slang._mathslang.syntax}function r(){return Slang._mathslang.semantix}function i(i,s,u){try{return u&&(i=e().replace_units(i,u),s=e().replace_units(s,u)),e().empty(i)||e().empty(s)?!1:(i=n().present(i),s=n().present(s),n().string(i)==n().string(s)?(t("syntax equality: "+n().string(i)+" = "+n().string(s)),!0):(i=r().represent(i),s=r().represent(s),i.string()==s.string()?(t("semantix equality: "+i.string()+" = "+s.string()),!0):i.calc()==s.calc()?(t("constant equality: "+i.string()+" = "+s.string()),!0):(i=i.simplify(3),s=s.simplify(3),i.string()==s.string()?(t("simplify equality: "+i.string()+" = "+s.string()),!0):(t("no semantix equality: "+i.string()+" = "+s.string()),!1))))}catch(a){return!1}}function s(r,i,s){try{return s&&(r=e().replace_units(r,s),i=e().replace_units(i,s)),e().empty(r)||e().empty(i)?!1:(r=n().present(r),i=n().present(i),n().string(r)==n().string(i)?(t("syntax equality: "+n().string(r)+" = "+n().string(i)),!0):(t("no syntax equality: "+n().string(r)+" = "+n().string(i)),!1))}catch(u){return!1}}function u(n,i,s,u){try{if("number"==typeof n&&(n=""+n),"number"==typeof i&&(i=""+i),"string"==typeof s&&(s=parseFloat(s)),u&&(n=e().replace_units(n,u),i=e().replace_units(i,u)),e().empty(n)||e().empty(i))return!1;n=r().present(n),i=r().present(i);var a=n.clone(),o=i.clone();return a.free_const(),o.free_const(),a=a.simplify(3),o=o.simplify(3),a.string()!=o.string()?!1:(n.free_imag(),i.free_imag(),n=n.simplify(2),i=i.simplify(2),n=n.calc(),i=i.calc(),isNaN(n)||isNaN(i)?!1:Math.abs(n-i)<=s+2.31e-16?(t("approx equality: "+n+" = "+i+" (epsilon = "+s+")"),!0):!1)}catch(s){return!1}}function a(t,n){function i(t,e,n){return t.substr(0,e)+n+t.substr(e+n.length)}n&&(t=e().replace_units(t,n)),t=r().present(t),t=t.simplify(3),t.free_const(),t=r().unit(t);for(var s=0;s<t.length;++s)if(s>0&&"^"==t[s-1]&&"-"==t[s]){for(var u=0;" "==t[s-2-u];)++u;if(")"==t[s-2-u]){for(var a=1,o=1;o>0&&s-2-u-a>=0;){var c=t[s-2-u-a];o+="("==c?-1:")"==c?1:0,++a}for(;a>=0;)--a}else t=i(t,s-0,"^"),t=i(t,s-1,t[s-2]),t=i(t,s-2,"/")}return t=t.replace(/1/g,"")}return{match:i,matchSyntax:s,matchApprox:u,extractUnit:a}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.lexical=function(){function t(t,e){this.flag=t,this.code=e,this.inv=!1}function e(e){e=a(e);for(var n=[],r=s(e).split("");r.length>0;){var i=0,p="";if(c.test(r[0])){do r.shift();while(c.test(r[0]))}else if(f[0].test(r[0])){r.shift(),p="",i=o.L;for(var g=1,h="";g>0;){if(p+=h,0==r.length)throw")";h=r.shift(),g+=f[0].test(h)?1:f[1].test(h)?-1:0}n.push(new t(i,p))}else{for(;i<l.length;){var m=l[i];if(m.test(r[0]))do p=p.concat(r.shift());while(m.plu&&m.test(r[0]));p.length>0?(n.push(new t(i,p)),i=l.length):i++}if(0==p.length)throw r.shift()}}return u(n)}function n(t){for(var e=0;e<t.length;e++)if(!c.test(t[e]))return!1;return!0}function r(t,e){function n(t,e,n){return t.substr(0,e)+n+t.substr(e+n.length)}var r=!0,i=!0;e.split(" ").forEach(function(e){switch(e){case"weight":t=t.replace(/ton/g,"(�1000000g)"),i&&(t=t.replace(/t/g,"(�1000000g)")),t=t.replace(/Kg/g,"(�1000g)"),t=t.replace(/kg/g,"(�1000g)"),t=t.replace(/mg/g,"(�0.001g)");break;case"distance":t=t.replace(/Km/g,"(� 1000m)"),t=t.replace(/km/g,"(� 1000m)"),t=t.replace(/dm/g,"(� 0.100m)"),t=t.replace(/cm/g,"(� 0.010m)"),t=t.replace(/mm/g,"(� 0.001m)"),t=t.replace(/min/g,"(� 60s)"),t=t.replace(/m/g,"(� m)"),r=!1;break;case"time":t=t.replace(/min/g,"(� 60s)"),r&&(t=t.replace(/m/g,"(� 60s)")),t=t.replace(/h/g,"(� 3600s)"),t=t.replace(/s/g,"(� s)"),i=!1;break;default:throw"mathslang does not support unit `"+e+"'"}});for(var s=0;s<t.length;++s)if("�"==t[s]){if(s&&"("!=t[s-1])throw t[s-1]+"� instead of (�";var u=2;do{for(;" "==t[s-u];)++u;if(s>=u&&")"==t[s-u]){for(var a=1;a>0&&s>u;){var o=t[s-++u];a+=")"==o?1:"("==o?-1:0}++u}for(;" "==t[s-u];)++u;for(;s>=u&&/^[0-9a-zA-Z]$/.test(t[s-u]);)++u;for(;" "==t[s-u];)++u}while(s>=u&&")"==t[s-u]);if("/"==t[s-u]){for(var c=0;u>c+2;++c)t=n(t,s-c,t[s-c-2]);t=n(t,s-u+1," "),t=n(t,s-u+2,"(")}}return t.replace(/\�/g,"")}function i(t,e){this.exp=e,this.plu=t,this.test=function(t){return this.exp.test(t)}}function s(t){return t=t.replace(/�/g,"^2"),t=t.replace(/�/g,"^3"),t=t.replace(/\u00B2/g,"^2"),t=t.replace(/\u00B3/g,"^3"),t=t.replace(/,/g,".")}function u(t){var e=[],n=!1;for(var r in t){if(t[r].flag==o.O)switch(t[r].code){case"-":t[r].inv=!t[r].inv;case"+":break;case"/":n=!0;case"*":continue;default:throw"operator `"+t[r].code+"' has not been implemented."}else if(t[r].flag==o.E){if(0==e.length)throw"radix ahead `"+t[r].code+"' is undefined.";var i=e.pop();if(i.flag==o.O)throw"radix is not allowed to be an `"+i.code+"' operator.";t[r].code=i.code,t[r].inv=i.inv}else n&&(t[r].inv=!(n=!1));e.push(t[r])}return e}function a(t){for(var e={"Sqrt(�)":"�^.5","sqrt(�)":"�^.5","root(�)":"�^.5","wurzel(�)":"�^.5","Wurzel(�)":"�^.5","R007(�)":"�^.5"},n=Object.keys(e),r=0;r<t.length;++r)for(var i=0;i<n.length;++i)for(var s=0;n[i][s]==t[r+s];)if(++s,"�"==n[i][s]){for(var u="",a=0,o="";(o=t[r+s+a])!=n[i][s+1];)u+=o,++a;t=t.substr(0,r)+"("+e[n[i]]+t.substr(r+s+a,t.length),t=t.replace("�","("+u+")")}return t}var o={O:0,E:1,X:2,N:3,L:7},c=new i(!0,/^\s$/),f=[new i(!1,/^\(|\[|\{$/),new i(!1,/^\)|\]|\}$/)],l=[new i(!1,/^\+|\-|\*|\/$/),new i(!1,/^\^$/),new i(!1,/^[a-zA-Z]$/),new i(!0,/^[0-9]|\,|\.$/)];return{FLAG:o,T:t,iter:e,empty:n,replace_units:r}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.semantix=function(){function t(t,e,n){this.fact=void 0!==t?t:1,this.imag=void 0!==e?e:{},this.sums=void 0!==n?n:[]}function e(t,e,n){this.offset=void 0!==t?t:0,this.queues=void 0!==e&&e.length?e:[],this.expont=void 0!==n?n:null}function n(t){if("string"!=typeof t)throw"`Seman.present(string)' got `"+typeof t+"' instead of `string'";var e=s().present(t);return r(e)}function r(n){var i=new e;return n.forEach(function(n){var s=new t;s.fact=n.fact?n.fact.reduce(function(t,e){return t*e},1):1,s.imag=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r]?e[r]++:e[r]=1}return e}(n.imag),n.exps.forEach(function(n){var i=r(n.radix),u=r(n.power),a=i.expont;if(i.expont=u,a){var o=new e;i.expont=a,o.expont=u,o.queues.push(new t(1,{},[i])),i=o}s.sums.push(i)}),n.sums.forEach(function(t){var e=r(t);s.sums.push(e)}),u(s)?i.offset+=s.fact:i.queues.push(s)}),i=i.solidify()}function i(){return Slang._mathslang.imaginary}function s(){return Slang._mathslang.syntax}function u(t){return 0==Object.keys(t.imag).length&&0==t.sums.length}function a(t){return Object.keys(t.imag).length>0?NaN:t.fact*t.sums.reduce(function(t,e){return t*e.calc()},1)}function o(e){var n=new t;return n.fact=e.fact,n.imag=i().clone(e.imag),n.sums=e.sums.map(function(t){return t.clone()}),n}function c(n,r){if(null!=n.expont)throw"`expansion': `s0.expont != null'";if(null!=r.expont)throw"`expansion': `s1.expont != null'";var s=n.offset*r.offset,u=n.queues.map(function(e){return new t(r.offset*e.fact,i().clone(e.imag),e.sums)}).concat(r.queues.map(function(e){return new t(n.offset*e.fact,i().clone(e.imag),e.sums)}));return n.queues.forEach(function(e){r.queues.forEach(function(n){var r={};i().insert(r,e.imag),i().insert(r,n.imag),u.push(new t(e.fact*n.fact,i().sort(r),e.sums.concat(n.sums)))})}),n=new e(s,u.filter(function(t){return 0!=t.fact}))}function f(t){var e,n,r,i=[];e=t.sums.reduce(function(t,e,n){e=e.combine(e);var r=e.expont;e.expont=null;var i=e.string();return e.expont=r,t[i]?t[i].push(n):t[i]=[n],t},new Object),n=Object.keys(e);for(var s=0;s<n.length;s++)r=e[n[s]],r.length>1&&(i=i.concat(l(t.sums,r)));return i.sort(function(t,e){return e-t}).forEach(function(e){t.sums.splice(e,1)}),t}function l(n,r){if(r.length<2)throw"`combineE': "+r.length+"/2 indices";var i=[],s=new e,u=new e;for(u.offset=n[r[0]].offset,u.queues=n[r[0]].queues;r.length;){var a=n[r[0]].expont;a?a.expont?s.queues.push(new t(1,{},[a])):(s.offset+=a.offset,s.queues=s.queues.concat(a.queues)):s.offset++,i.push(r[0]),r.splice(0,1)}return u.expont=s,n.push(u),i}return t.prototype.ident=function(){return this.fact*this.sums.reduce(function(t,e){return t*e.calc()},1)==1&&i().empty(this.imag)},t.prototype.string=function(){return this.sums.reduce(function(t,e){return t+"("+e.string()+")"},""+this.fact+i().string(this.imag))},t.prototype.pow=function(e){return new t(Math.pow(this.fact,e),Object.keys(this.imag).reduce(function(t,n){return t[n]=this.imag[n]*e,t},{}))},t.prototype.extract=function(){for(var n=this,r=new e(0,[new t(n.fact,i().clone(n.imag))]),s=0;s<n.sums.length;)n.sums[s].expand(),null==n.sums[s].expont?(r=c(r,n.sums[s]),n.sums.splice(s,1)):s++;return r},e.prototype.unit=function(){for(var t=this,e="",n=0;n<t.queues.length;++n){var r=t.queues[n];e=Object.keys(r.imag).reduce(function(t,e){var n=r.imag[e];return t+(1==n?e:-1==n?"1/"+e:e+"^"+n)},e),r.sums.forEach(function(t){e+="("+t.unit()+")"}),n+1<t.queues.length&&(e+=" + ")}return t.expont?e+"^"+t.expont.unit():e},e.prototype.calc=function(){var t=this.offset+this.queues.reduce(function(t,e){return t+a(e)},0);return this.expont?Math.pow(t,this.expont.calc()):t},e.prototype.expand=function(){for(var t=0;t<this.queues.length;){var e=this.queues[t].extract(),n=this.queues[t].imag;if(Object.keys(n).forEach(function(t){delete n[t]}),this.queues[t].fact=1,this.queues[t].ident()){if(e.expont)throw"`expand': `s0.expont' must be `null'.";this.queues.splice(t,1),this.offset+=e.offset,this.queues=e.queues.concat(this.queues),t+=e.queues.length}else 1!=e.calc()&&this.queues[t].sums.push(e),++t}return this},e.prototype.combine=function(){var t=this.offset,n=[],r=void 0,i=this.expont;return i&&(i=this.expont.combine()),this.queues.filter(function(e){var n=a(e);return isNaN(n)?!0:(t+=n,!1)}).map(f).sort(function(t,e){return-function(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),s=0;i>s;s++){if(n[s]<r[s])return-1;if(n[s]>r[s])return 1}var u=n.length-r.length;if(u)return u;for(var s=0;i>s;s++)if(u=t[n[s]]-e[r[s]])return u;return 0}(t.imag,e.imag)}).forEach(function(t){void 0!=r&&JSON.stringify(r.imag)==JSON.stringify(t.imag)&&0==r.sums.length&&0==t.sums.length?n[0].fact+=t.fact:(n.unshift(t),r=t)}),n=n.filter(function(t){return 0!=t.fact}),new e(t,n,i).solidify()},e.prototype.string=function(){var t=this.expont?!0:!1;return this.queues.reduce(function(t,e){var n=e.string();return t+(e.fact<0?n:"+"+n)},(t?"(":"")+this.offset)+(t?")^("+this.expont.string()+")":"")},e.prototype.simplify=function(t){var e=this;do e=e.expand(),e=e.combine(),e=e.expow();while(--t>0);return e},e.prototype.expow=function(){function n(t){if(0==t.offset&&1==t.queues.length&&t.expont){for(var n=t.expont,r=t.queues[0],t=new e(0,[r]),s=0;s<r.sums.length;s++)r.sums[s].expont=c(r.sums[s].expont,n.clone());var u=n.calc();isNaN(u)?(r.sums.push(new e(r.fact,r.imag,n.clone())),r.fact=1,r.imag={}):(r.fact=Math.pow(r.fact,u),i().pow(r.imag,u))}return t}var r=n(this),s=r.expont?r.expont.calc():NaN;if(isNaN(s))r.expont&&r.expont.expont;else{for(var u=[];s>1;){var a=new e;a.offset=r.offset,a.queues=r.queues.map(o),u.push(a),s--}r.expont=1==s?null:new e(s),u.length&&(u.unshift(r),r=new e,r.queues.push(new t(1,{},u)))}return r.queues.forEach(function(t){t.sums=t.sums.map(function(t){return t.expow()})}),r=r.solidify()},e.prototype.solidify=function(){var t=this,e=t.expont?t.expont.calc():NaN;return 0!=t.offset||1!=t.queues.length||1!=t.queues[0].fact||0!=t.queues[0].sums||isNaN(e)?t.queues.forEach(function(t){return t.sums.map(function(t){return t.solidify()})}):(i().pow(t.queues[0].imag,e),t.expont=null),0!=t.offset||1!=t.queues.length||t.expont||1!=t.queues[0].fact||0!=Object.keys(t.queues[0].imag).length||1!=t.queues[0].sums.length?t:t.queues[0].sums[0].solidify()},e.prototype.clone=function(){var t=this,n=new e;return n.offset=t.offset,n.queues=t.queues.map(o),n.expont=t.expont?t.expont.clone():null,n},e.prototype.free_const=function(){var t=this;t.offset=0,t.queues.forEach(function(t){t.fact=1,t.sums.forEach(function(t){t.free_const()})}),t.expont&&t.expont.free_const()},e.prototype.free_imag=function(){this.queues.forEach(function(t){t.imag="",t.sums.forEach(function(t){t.free_imag()})}),this.expont&&this.expont.free_imag()},{present:n,represent:r}}(),window.Slang=window.Slang||{},window.Slang._mathslang=window.Slang._mathslang||{},window.Slang._mathslang.syntax=function(){function t(){this.fact=[],this.imag="",this.exps=[],this.sums=[]}function e(){this.radix=[],this.power=[]}function n(t){if("string"!=typeof t)throw"syntax.present(typeof s = "+typeof t+")";var e=i().iter(t),n=[];do{for(var r=!1;e.length>0&&e[0].flag==i().FLAG.O;)e.shift().inv&&(r=!r);var s=u(e);s&&(r&&s.fact.unshift(-1),n.push(s))}while(e.length>0);return l(n),n}function r(t){var e="";if(t.length){e+=t[0].string();for(var n=1;n<t.length;n++){var r=t[n].fact.reduce(function(t,e){return t*e},1),i=t[n].string();e+=0>r?i:"+"+i}}return e}function i(){return Slang._mathslang.lexical}function s(t){}function u(r){for(var s=new t;r.length>0;)switch(r[0].flag){case i().FLAG.N:var u=parseFloat(r[0].code);if(r.shift().inv){if(0==u)throw"`pluckQ' divided by 0.";u=1/u}s.fact.push(u);break;case i().FLAG.X:var f=r[0].code;if(r.shift().inv){var l=new e;l.radix.push(c(f)),l.power.push(o(-1)),s.exps.push(l)}else s.imag+=f;break;case i().FLAG.E:var l=new e;r[0].inv,l.radix=n(r.shift().code),l.power=a(r),s.exps.push(l);break;case i().FLAG.L:var p=n(r[0].code);if(r.shift().inv){var l=new e;l.radix=p,l.power.push(o(-1)),s.exps.push(l)}else s.sums.push(p);break;case i().FLAG.O:default:return m(s)?null:s}return m(s)?null:s}function a(t){if(!(t.length>0))throw"`pluckT' without any token.";switch(t[0].flag){case i().FLAG.N:return[o(t.shift().code)];case i().FLAG.X:return[c(t.shift().code)];case i().FLAG.E:var r=new e;if(t[0].inv)throw"`pluckT("+t[0].code+"..)' illegal `inv'";return r.radix=n(t.shift().code),r.power=a(t,!0),[f(r)];case i().FLAG.L:return n(t.shift().code);case i().FLAG.O:t.shift();var s=a(t);return s.forEach(function(t){t.fact.push(-1)}),s;default:throw"`pluckT' invalid `flag=?'."}}function o(e){var n=new t;return n.fact.push(e),n}function c(e){var n=new t;return"string"!=typeof e?(s("not a string"),n):(n.imag=e,n)}function f(e){var n=new t;return"E"!=typeof e?(s("not a E"),n):(n.exps.push(e),n)}function l(t){t.forEach(function(t){t.sums.forEach(function(t){l(t)}),t.fact.sort(function(t,e){return t-e}),t.imag=function(t){return t.split("").sort(function(t,e){return t.charCodeAt(0)-e.charCodeAt(0)}).reduce(function(t,e){return t+e},"")}(t.imag),t.exps.sort(function(t,e){return g(t)-g(e)}),t.sums.sort(function(t,e){return p(t)-p(e)})}),t.sort(function(t,e){return function(t,e){for(var n=Math.min(t.length,e.length),r=0;n>r;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.length-e.length}(t.imag,e.imag)})}function p(t){return t.reduce(function(t,e){return t+h(e)},0)}function g(t){return Math.pow(16536421.3572347+p(t.radix),p(t.power))}function h(t){return t.fact.reduce(function(t,e){return t*e},1)*function(t){for(var e=1,n=0;n<t.length;n++)e*=t.charCodeAt(0);return e}(t.imag)*t.exps.reduce(function(t,e){return t*g(e)},1)*t.sums.reduce(function(t,e){return t*p(e)},1)}function m(t){return 0==t.fact.length&&0==t.imag.length&&0==t.exps.length&&0==t.sums.length}return t.prototype.string=function(){var t=this,e="";if(t.fact.length){e+=t.fact[0];for(var n=1;n<t.fact.length;n++)e+="*"+t.fact[n]}return e+=t.imag,e+=t.exps.reduce(function(t,e){return t+e.string()},""),e+=t.sums.reduce(function(t,e){return t+"("+r(e)+")"},"")},e.prototype.string=function(){return"("+r(this.radix)+")^("+r(this.power)+")"},{present:n,string:r}}();